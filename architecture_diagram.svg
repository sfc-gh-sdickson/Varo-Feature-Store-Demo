<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle">
    Varo Intelligence Agent & Feature Store Architecture
  </text>
  
  <!-- Layer 1: Intelligence Agent (Top) -->
  <g id="layer1">
    <rect x="300" y="80" width="600" height="100" fill="#0088CC" stroke="#005580" stroke-width="2" rx="10"/>
    <text x="600" y="110" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="white" text-anchor="middle">
      Varo Intelligence Agent
    </text>
    <text x="600" y="135" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle">
      Natural Language Interface | Orchestration Layer
    </text>
    <text x="600" y="155" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">
      Banking Questions → SQL/ML → Insights
    </text>
  </g>
  
  <!-- Layer 2A: Cortex Analyst (Left) -->
  <g id="layer2a">
    <rect x="50" y="220" width="280" height="140" fill="#00AA44" stroke="#008833" stroke-width="2" rx="10"/>
    <text x="190" y="250" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">
      Cortex Analyst
    </text>
    <text x="190" y="275" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">
      Semantic Views (3)
    </text>
    <text x="190" y="295" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Customer Banking Intelligence
    </text>
    <text x="190" y="310" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Transaction Payment Intelligence
    </text>
    <text x="190" y="325" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Credit Risk Intelligence
    </text>
    <text x="190" y="345" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      KPIs | Metrics | Analytics
    </text>
  </g>
  
  <!-- Layer 2B: Feature Store (Center) -->
  <g id="layer2b">
    <rect x="360" y="220" width="280" height="140" fill="#FF6600" stroke="#CC4400" stroke-width="2" rx="10"/>
    <text x="500" y="250" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">
      Feature Store
    </text>
    <text x="500" y="275" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">
      SQL-Based Feature Engineering
    </text>
    <text x="500" y="295" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Real-time Features (Streams)
    </text>
    <text x="500" y="310" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Batch Features (Dynamic Tables)
    </text>
    <text x="500" y="325" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Point-in-Time Retrieval
    </text>
    <text x="500" y="345" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      Replaces Tecton | Auto-Scaling
    </text>
  </g>
  
  <!-- Layer 2C: ML Functions (Center-Right) -->
  <g id="layer2c">
    <rect x="670" y="220" width="230" height="140" fill="#9933CC" stroke="#6600AA" stroke-width="2" rx="10"/>
    <text x="785" y="250" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">
      ML Functions
    </text>
    <text x="785" y="275" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">
      Real-time Predictions
    </text>
    <text x="785" y="295" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Fraud Scoring
    </text>
    <text x="785" y="310" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Advance Eligibility
    </text>
    <text x="785" y="325" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Credit Limits
    </text>
    <text x="785" y="345" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Customer LTV
    </text>
  </g>
  
  <!-- Layer 2D: Cortex Search (Far Right) -->
  <g id="layer2d">
    <rect x="930" y="220" width="220" height="140" fill="#EE4400" stroke="#CC2200" stroke-width="2" rx="10"/>
    <text x="1040" y="250" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">
      Cortex Search
    </text>
    <text x="1040" y="275" font-family="Arial, sans-serif" font-size="12" fill="white" text-anchor="middle">
      Unstructured Data (3)
    </text>
    <text x="1040" y="295" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Support Transcripts
    </text>
    <text x="1040" y="310" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Compliance Docs
    </text>
    <text x="1040" y="325" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      • Product Knowledge
    </text>
    <text x="1040" y="345" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      Semantic Search | RAG
    </text>
  </g>
  
  <!-- Layer 3: Data Foundation -->
  <g id="layer3">
    <rect x="50" y="400" width="1100" height="180" fill="#444499" stroke="#333388" stroke-width="2" rx="10"/>
    <text x="600" y="430" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="white" text-anchor="middle">
      Banking Data Foundation
    </text>
    
    <!-- RAW Schema -->
    <rect x="70" y="450" width="250" height="110" fill="#5555AA" stroke="#4444AA" stroke-width="1" rx="5"/>
    <text x="195" y="470" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">
      RAW Schema (13 Tables)
    </text>
    <text x="195" y="490" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Customers | Accounts | Transactions
    </text>
    <text x="195" y="505" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Cards | Direct Deposits | Cash Advances
    </text>
    <text x="195" y="520" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Credit Apps | Support | Compliance
    </text>
    <text x="195" y="540" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">
      2M Customers | 50M+ Transactions
    </text>
    
    <!-- FEATURE_STORE Schema -->
    <rect x="340" y="450" width="280" height="110" fill="#5555AA" stroke="#4444AA" stroke-width="1" rx="5"/>
    <text x="480" y="470" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">
      FEATURE_STORE Schema (9 Tables)
    </text>
    <text x="480" y="490" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Feature Definitions | Feature Values
    </text>
    <text x="480" y="505" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Online Features | Training Datasets
    </text>
    <text x="480" y="520" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Feature Monitoring | Lineage
    </text>
    <text x="480" y="540" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">
      200+ Features | Sub-second Serving
    </text>
    
    <!-- ANALYTICS Schema -->
    <rect x="640" y="450" width="250" height="110" fill="#5555AA" stroke="#4444AA" stroke-width="1" rx="5"/>
    <text x="765" y="470" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">
      ANALYTICS Schema
    </text>
    <text x="765" y="490" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Analytical Views (10)
    </text>
    <text x="765" y="505" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Semantic Views (3)
    </text>
    <text x="765" y="520" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      ML Functions (5)
    </text>
    <text x="765" y="540" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">
      Business Logic | Predictions
    </text>
    
    <!-- Unstructured Data -->
    <rect x="910" y="450" width="220" height="110" fill="#5555AA" stroke="#4444AA" stroke-width="1" rx="5"/>
    <text x="1020" y="470" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">
      Unstructured Data
    </text>
    <text x="1020" y="490" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      25K Support Transcripts
    </text>
    <text x="1020" y="505" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Compliance Documents
    </text>
    <text x="1020" y="520" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Product Knowledge Base
    </text>
    <text x="1020" y="540" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white" text-anchor="middle">
      Indexed for Search
    </text>
  </g>
  
  <!-- Connections -->
  <!-- Agent to Components -->
  <line x1="400" y1="180" x2="190" y2="220" stroke="#666" stroke-width="2"/>
  <line x1="500" y1="180" x2="500" y2="220" stroke="#666" stroke-width="2"/>
  <line x1="700" y1="180" x2="785" y2="220" stroke="#666" stroke-width="2"/>
  <line x1="800" y1="180" x2="1040" y2="220" stroke="#666" stroke-width="2"/>
  
  <!-- Components to Data -->
  <line x1="190" y1="360" x2="190" y2="400" stroke="#666" stroke-width="2"/>
  <line x1="500" y1="360" x2="480" y2="400" stroke="#666" stroke-width="2"/>
  <line x1="785" y1="360" x2="765" y2="400" stroke="#666" stroke-width="2"/>
  <line x1="1040" y1="360" x2="1020" y2="400" stroke="#666" stroke-width="2"/>
  
  <!-- Feature Store Flow -->
  <path d="M 620 290 L 670 290" stroke="#FF6600" stroke-width="3" fill="none"/>
  <polygon points="670,285 680,290 670,295" fill="#FF6600"/>
  
  <!-- Key Differentiators Box -->
  <g id="differentiators">
    <rect x="50" y="620" width="1100" height="120" fill="#f0f0f0" stroke="#333" stroke-width="2" rx="10"/>
    <text x="600" y="650" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">
      Key Differentiators from Tecton
    </text>
    <text x="200" y="680" font-family="Arial, sans-serif" font-size="13" text-anchor="start">
      • SQL-First: All features defined in SQL (no Python/Scala required)
    </text>
    <text x="200" y="700" font-family="Arial, sans-serif" font-size="13" text-anchor="start">
      • Auto-Scaling: Serverless compute scales with demand
    </text>
    <text x="200" y="720" font-family="Arial, sans-serif" font-size="13" text-anchor="start">
      • Unified Platform: Features, ML, and Analytics in one system
    </text>
    <text x="650" y="680" font-family="Arial, sans-serif" font-size="13" text-anchor="start">
      • Streaming Support: Native streams for real-time features
    </text>
    <text x="650" y="700" font-family="Arial, sans-serif" font-size="13" text-anchor="start">
      • Time Travel: Built-in backfill and historical features
    </text>
    <text x="650" y="720" font-family="Arial, sans-serif" font-size="13" text-anchor="start">
      • Lower Cost: Pay only for compute used, no infrastructure
    </text>
  </g>
  
  <!-- Warehouses -->
  <g id="warehouses">
    <rect x="50" y="780" width="540" height="80" fill="#e6f2ff" stroke="#0066cc" stroke-width="2" rx="5"/>
    <text x="320" y="805" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">
      Compute Resources
    </text>
    <text x="150" y="830" font-family="Arial, sans-serif" font-size="12" text-anchor="start">
      VARO_WH (X-SMALL): Queries & Analytics
    </text>
    <text x="150" y="850" font-family="Arial, sans-serif" font-size="12" text-anchor="start">
      VARO_FEATURE_WH (SMALL): Feature Engineering & ML
    </text>
    <text x="400" y="830" font-family="Arial, sans-serif" font-size="12" text-anchor="start">
      Auto-suspend after 5 minutes
    </text>
    <text x="400" y="850" font-family="Arial, sans-serif" font-size="12" text-anchor="start">
      Auto-scale based on workload
    </text>
  </g>
  
  <!-- Data Flow Indicators -->
  <text x="620" y="785" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Data Flow:</text>
  <text x="720" y="785" font-family="Arial, sans-serif" font-size="12">Real-time (Streaming)</text>
  <line x1="880" y1="780" x2="920" y2="780" stroke="#FF6600" stroke-width="3"/>
  
  <text x="720" y="810" font-family="Arial, sans-serif" font-size="12">Batch (Scheduled)</text>
  <line x1="880" y1="805" x2="920" y2="805" stroke="#666" stroke-width="3" stroke-dasharray="5,5"/>
  
  <text x="720" y="835" font-family="Arial, sans-serif" font-size="12">Query (On-demand)</text>
  <line x1="880" y1="830" x2="920" y2="830" stroke="#0088CC" stroke-width="3"/>
</svg>
